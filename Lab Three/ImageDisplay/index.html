<!DOCTYPE html>
<html lang="en">
<head>
    <title>Music</title>
    <link rel="stylesheet" href="style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Raleway&display=swap" rel="stylesheet">
</head>
<body>
    <h1 id="title">Music Gowdown</h1>
    <form>
        <div id="image-div">
            <img id="image"/>
            <input id="chooser" type="file" accept="image/*" value="Choose"/><label id="chooser-label" for="chooser">Choose Cover image</label>
        </div>
        <div id="details-div">
            <input class="details" type="text" placeholder="Enter the name of the song">
            <input class="details" type="text" placeholder="Enter the name of the artist">
            <input class="details" type="text" placeholder="Enter the genre of the song">
            <input class="details" type="text" placeholder="Enter the year of release">
            <input class="details" type="text" placeholder="Enter the name of the album">
            <input class="add-btn" id="add-btn" type="button" value="Add"> 
        </div>
        <table class="items" id="song-list">
            <tr>
                <th>Name</th>
                <th>Artist</th>
                <th>Genre</th>
                <th>Release</th>
                <th>Album</th>
                <th>Cover</th>
                <th></th>
            </tr>
        </table>
    </form>
    <script>
        const imageTag = document.getElementById("image")
        const chooser = document.getElementById("chooser")
        const add_btn = document.getElementById("add-btn")
        const song_list = document.getElementById("song-list")
        const details_list = document.getElementsByClassName("details")
        var nameArr = []
        chooser.addEventListener('change',(e)=>{
            imageTag.src = URL.createObjectURL(chooser.files[0])
        })
        add_btn.addEventListener('click',()=>{
            if (nameArr.includes(details_list[0].value)) {
                alert("Song Already Exits");
                return
            }
            const row = document.createElement('tr')
            for(let c = 0;c < details_list.length;c++){
                if(details_list[c].value ===  ""){
                    alert("Please Fill all details")
                    return
                }
                else{
                    const td = document.createElement('td')
                    const textNode = document.createTextNode(details_list[c].value)
                    td.appendChild(textNode)
                    row.append(td)
                }
            }
            nameArr.push(details_list[0].value)

            const td = document.createElement('td')
            const img = document.createElement('img')
            
            img.style.width = "50px"
            img.style.height = "50px"
            img.src = imageTag.src
            
            td.append(img)
            row.append(td)
            
            const close = document.createElement('img')

            close.setAttribute('id',details_list[0].value)
            
            close.style.width = '25px'
            close.style.height = '25px'
            close.src = "close.png"
            
            close.addEventListener('click',(e)=>{
                console.log(e.target.id)
            })

            row.append(close)
            song_list.appendChild(row)
        });
    </script>
</body>
</html>